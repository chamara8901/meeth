# 1. [管理画面再構築](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-%E7%94%BB%E9%9D%A2%E4%B8%80%E8%A6%A7%28ver2.0%29) - M6.6:顧客詳細.お届け先 機能設計書

- [1. 管理画面再構築 - M6.6:顧客詳細.お届け先 機能設計書](#1-管理画面再構築---m66顧客詳細お届け先-機能設計書)
  - [1.1. 処理概要](#11-処理概要)
    - [1.1.1. 機能名](#111-機能名)
    - [1.1.2. 機能概要](#112-機能概要)
    - [1.1.3. 前提条件](#113-前提条件)
    - [1.1.4. 処理概要](#114-処理概要)
    - [1.1.5. パラメータ一覧](#115-パラメータ一覧)
    - [1.1.6. テーブル一覧](#116-テーブル一覧)
    - [1.1.7. ファイル一覧](#117-ファイル一覧)
  - [1.2. レイアウト](#12-レイアウト)
    - [1.2.1. [旧仕様]（）](#121-旧仕様)
    - [1.2.2. 画面イメージ](#122-画面イメージ)
    - [1.2.3. 画面項目](#123-画面項目)
    - [1.2.4. イベント定義](#124-イベント定義)
  - [1.3. API](#13-api)
    - [1.3.1. API一覧](#131-api一覧)

## 1.1. 処理概要

### 1.1.1. 機能名

|  No.  |       項目       |         値          |
| :---: | :--------------: | :-----------------: |
|   1   |   プロジェクト   | meeth様ECサイト開発 |
|   2   |     システム     |      管理画面       |
|   3   |  画面プログラム  |      顧客詳細       |
|   4   | 画面プログラムID |        M6.6         |
|   5   |  画面フォーム名  |         N/A         |

### 1.1.2. 機能概要

- 顧客が登録済のお届け先一覧を表示する
- お届け先の編集(モーダルを表示する)

### 1.1.3. 前提条件

- ログイン済のユーザであること
- ログインユーザの[権限](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-%E6%A8%A9%E9%99%90%E4%B8%80%E8%A6%A7)が条件を満たしていること(総合管理者、許可された作業担当者のみ閲覧・操作可能)

### 1.1.4. 処理概要

| No  | 操作                                               | 処理概要                                             |
| --- | -------------------------------------------------- | ---------------------------------------------------- |
| 1   | 初期表示時                                         | お届け先を表示する |

### 1.1.5. パラメータ一覧

| No  | 論理名称 | 物理名称    | I/O | 備考 |
| --- | -------- | ----------- | --- | ---- |
| 1   | 顧客ID   | customer_id | O   |      |

### 1.1.6. テーブル一覧

| No  | 論理名称                                                                                                                            | 物理名称           | I/O | 備考 |
| --- | ----------------------------------------------------------------------------------------------------------------------------------- | ------------------ | --- | ---- |
| 1   | [顧客住所テーブル](https://github.com/grrowjp/Meeth/wiki/%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E5%AE%9A%E7%BE%A9_customer_addresses) | customer_addresses | O   |      |

### 1.1.7. ファイル一覧

なし

## 1.2. レイアウト

### 1.2.1. [旧仕様]（）
![image](https://user-images.githubusercontent.com/77314669/112282785-c7e6b480-8cca-11eb-8c8a-cdde0e73ca5c.png)

### 1.2.2. 画面イメージ

![image](https://user-images.githubusercontent.com/77314669/115187214-e602d180-a11d-11eb-8276-9531ccac2144.png)




### 1.2.3. 画面項目
| No 	| 名称 	| 対応DB項目 	| I/O 	| 種別 	| 型 	| 桁数 	| 必須 	| バリデーション 	| 備考 	|
|-	|-	|-	|-	|-	|-	|-	|-	|-	|-	|
| 1 	| お届け先タブ 	| ー 	| O 	| タブ 	| ー 	| ー 	| ー 	| ー 	|  	|
| 2 	| 総件数 	| ー 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 3 	| ページャー 	| ー 	| O 	| リンク 	| ー 	| ー 	| ー 	| ー 	|  	|
| 4 	| 新規登録 	|  	|  	|  	|  	|  	|  	|  	|  	|
| 5 	| お届け先 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	| 項番を表示する 	|
|  	| デフォルト可否 	| customer_addresses.is_default 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 6 	| 名前 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.family_name <br>customer_addresses.first_name  	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 7 	| 会社名 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.company_name 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 8 	| 国 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.country 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 9 	| 郵便番号 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.zip_code 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 10 	| 都道府県 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.prefecture 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 11 	| 市区町村 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.address2 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 12 	| 住所 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.address3 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 13 	| アパート 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.address4 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 14 	| 電話番号 	| ー 	| O 	| ラベル 	| ー 	| ー 	| ー 	| ー 	|  	|
|  	|  	| customer_addresses.phone 	| O 	| テキスト 	| ー 	| ー 	| ー 	| ー 	|  	|
| 15 	| 編集 	| ー 	| O 	| ボタン 	| ー 	| ー 	| ー 	| ー 	|  	|
### 1.2.4. イベント定義

| No  | 項目            | 発生条件 | 遷移先         | 備考                              |
| --- | --------------- | -------- | -------------- | --------------------------------- |
| 1   | 編集            | クリック | [お届け先編集](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-0061.M6.8%3A%E9%A1%A7%E5%AE%A2%E8%A9%B3%E7%B4%B0.%E3%81%8A%E5%B1%8A%E3%81%91%E5%85%88%E7%B7%A8%E9%9B%86_ver2.0/_edit)モーダル表示             |     |

## 1.3. API

### 1.3.1. API一覧

| NO. | 名称                | 内容                                        |
| --- | ------------------- | ------------------------------------------- |
| 1   | [お届け先住所取得API](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-%E9%A1%A7%E5%AE%A2%E8%A9%B3%E7%B4%B0.%E3%81%8A%E5%B1%8A%E3%81%91%E5%85%88-%E3%81%8A%E5%B1%8A%E3%81%91%E5%85%88%E4%BD%8F%E6%89%80%E5%8F%96%E5%BE%97API) | 顧客に紐づくお届け先の住所一覧を取得するAPI |
| 2   | [お届け先住所件数取得API](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-%E9%A1%A7%E5%AE%A2%E8%A9%B3%E7%B4%B0.%E3%81%8A%E5%B1%8A%E3%81%91%E5%85%88-%E4%BB%B6%E6%95%B0%E5%8F%96%E5%BE%97API) | 顧客に紐づくお届け先の住所件数を取得するAPI |