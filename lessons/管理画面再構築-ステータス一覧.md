# 1. [管理画面再構築](https://github.com/grrowjp/Meeth/wiki/%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E5%86%8D%E6%A7%8B%E7%AF%89-%E7%94%BB%E9%9D%A2%E4%B8%80%E8%A6%A7%28ver2.0%29) - ステータス一覧

- [1. 管理画面再構築 - ステータス一覧](#1-管理画面再構築---ステータス一覧)
  - [1.1. 1-1. 前提](#11-1-1-前提)
- [2. 各状況一覧](#2-各状況一覧)
  - [2.1. 注文状況](#21-注文状況)
    - [2.1.1. DB項目](#211-db項目)
      - [2.1.1.1. 注文状況 (orders.order_status)](#2111-注文状況-ordersorder_status)
      - [2.1.1.2. 配送状況 (orders.shipping_status)](#2112-配送状況-ordersshipping_status)
    - [2.1.2. 表示項目](#212-表示項目)
  - [2.2. 決済状況](#22-決済状況)
    - [2.2.1. DB項目](#221-db項目)
      - [2.2.1.1. 決済状況 (payments.status)](#2211-決済状況-paymentsstatus)
    - [2.2.2. 表示項目](#222-表示項目)
  - [2.3. ステータス間の関係性](#23-ステータス間の関係性)
    - [2.3.1. 注文方法別の発送可能条件](#231-注文方法別の発送可能条件)
    - [2.3.2. 注文状況と決済状況の関係](#232-注文状況と決済状況の関係)
  - [2.4. お知らせ公開状況](#24-お知らせ公開状況)
    - [2.4.1. DB項目](#241-db項目)
      - [2.4.1.1. お知らせ公開状況 (topics.status)](#2411-お知らせ公開状況-topicsstatus)
    - [2.4.2. 表示項目](#242-表示項目)
  - [2.5. 入荷リクエスト状況](#25-入荷リクエスト状況)
    - [2.5.1. DB項目](#251-db項目)
      - [2.5.1.1. 入荷リクエスト状況 (restock_requests.status)](#2511-入荷リクエスト状況-restock_requestsstatus)
    - [2.5.2. 表示項目](#252-表示項目)
  - [2.6. 定期購入状況](#26-定期購入状況)
    - [2.6.1. DB項目](#261-db項目)
      - [2.6.1.1. 定期購入状況 (subscriptions.status)](#2611-定期購入状況-subscriptionsstatus)
    - [2.6.2. 表示項目](#262-表示項目)
  - [2.7. 定期購入プロセス状況](#27-定期購入プロセス状況)
    - [2.7.1. DB項目](#271-db項目)
      - [2.7.1.1. 定期購入プロセス状況 (subscriptions.processing_status)](#2711-定期購入プロセス状況-subscriptionsprocessing_status)
    - [2.7.2. 表示項目](#272-表示項目)
  - [2.8. メール配信状況](#28-メール配信状況)
    - [2.8.1. DB項目](#281-db項目)
      - [2.8.1.1. メール配信状況 (email_jobs.status)](#2811-メール配信状況-email_jobsstatus)
    - [2.8.2. 表示項目](#282-表示項目)
  - [2.9. 商品ステータス](#29-商品ステータス)
    - [2.9.1. DB項目](#291-db項目)
      - [2.9.1.1. 商品ステータス (products.status)](#2911-商品ステータス-productsstatus)
    - [2.9.2. 表示項目](#292-表示項目)
  - [2.10. 商品詳細ステータス](#210-商品詳細ステータス)
    - [2.10.1. DB項目](#2101-db項目)
      - [2.10.1.1. 商品ステータス (product_details.status)](#21011-商品ステータス-product_detailsstatus)
    - [2.10.2. 表示項目](#2102-表示項目)

## 1.1. 1-1. 前提

- 値によって表示文言が変動する
- ものにより、表示文言の前に丸アイコンを設置し、直感的に判別させる
  - 表示項目の「アイコンの色」項目にて記載
- ステータスを「状況」と表記することで統一
  - ただし現在、商品の公開ステータスだけは「ステータス」と表記する(今後変動する可能性あり)

# 2. 各状況一覧

## 2.1. 注文状況

- orders.order_statusの値とorders.shipping_statusの値によって変動

### 2.1.1. DB項目

#### 2.1.1.1. 注文状況 (orders.order_status)

| NO  | 論理名     | 物理名     | 値  |
| --- | ---------- | ---------- | --- |
| 1   | 処理中     | processing | 1   |
| 2   | 保留中     | pending    | 2   |
| 3   | 完了       | finished   | 3   |
| 4   | キャンセル | canceled   | 4   |
| 5   | 返品       | retuerned  | 5   |

#### 2.1.1.2. 配送状況 (orders.shipping_status)

| NO  | 論理名     | 物理名       | 値  |
| --- | ---------- | ------------ | --- |
| 1   | 未発送     | undispatched | 1   |
| 2   | 発送処理中 | preparing    | 2   |
| 3   | 発送完了   | finished     | 3   |
| 4   | キャンセル | canceled     | 4   |
| 5   | 返品       | returaned    | 5   |

### 2.1.2. 表示項目

| No. | 名称       | アイコンの色 | 対応DB項目                                                                     | 備考               |
| --- | ---------- | ------------ | ------------------------------------------------------------------------------ | ------------------ |
| 1   | 発送前     | 黄色         | orders.order_status = 1(処理中)<br>orders.shipping_status = 1(未発送)          | どちらも満たすこと |
| 2   | 発送処理中 | 緑色         | orders.order_status = 1(処理中)<br>orders.shipping_status = 2(発送処理中)      | どちらも満たすこと |
| 3   | 保留中     | オレンジ色   | orders.order_status = 2(保留中)                                                |                    |
| 4   | 発送完了   | グレー色     | orders.order_status = 3(完了) <br>orders.shipping_status = 3(発送完了)         | どちらも満たすこと |
| 5   | 返品       | 赤色         | orders.order_status = 5(返品) <br>orders.shipping_status = ５(返品)            | どちらも満たすこと |
| 6   | キャンセル | 赤色         | orders.order_status = 4(キャンセル) <br>orders.shipping_status = 4(キャンセル) | どちらも満たすこと |
| 7   | その他     | 赤色         | ー                                                                             | それ以外           |

## 2.2. 決済状況

- payments.statusの値によって変動

### 2.2.1. DB項目

#### 2.2.1.1. 決済状況 (payments.status)

| NO  | 論理名     | 物理名           | 値  |
| --- | ---------- | ---------------- | --- |
| 1   | 仮売上     | auth             | 1   |
| 2   | 実売上     | capture          | 2   |
| 3   | 振込待ち   | waiting_transfer | 3   |
| 4   | 期限切れ   | expired          | 4   |
| 5   | 代引拒否   | cod_denied       | 5   |
| 6   | 返金       | returned         | 6   |
| 7   | キャンセル | canceled         | 7   |

### 2.2.2. 表示項目

| No. | 名称       | アイコンの色 | 対応DB項目                      | 備考     |
| --- | ---------- | ------------ | ------------------------------- | -------- |
| 1   | 仮売上     | 黄色         | payments.status = 1(仮売上)     |          |
| 2   | 実売上     | 緑色         | payments.status = 2(実売上)     |          |
| 3   | 振込待ち   | 赤色         | payments.status = 3(振込待ち)   |          |
| 4   | 期限切れ   | 赤色         | payments.status = 4(期限切れ)   |          |
| 5   | 代引拒否   | 赤色         | payments.status = 5(代引拒否)   |          |
| 6   | 返金       | 赤色         | payments.status = 6(返品)       |          |
| 7   | キャンセル | 赤色         | payments.status = 7(キャンセル) |          |
| 8   | その他     | 赤色         | ー                              | それ以外 |

## 2.3. ステータス間の関係性

### 2.3.1. 注文方法別の発送可能条件

| NO  | 支払方法         | 決済ステータス | 配送ステータス | 注文ステータス |
| --- | ---------------- | -------------- | -------------- | -------------- |
| 1   | クレジットカード | 仮売上         | 未発送         | 処理中         |
| 2   | Paypal           | 実売上         | 未発送         | 処理中         |
| 3   | 銀行振込         | 実売上         | 未発送         | 処理中         |
| 4   | 代金引換         | 仮売上         | 未発送         | 処理中         |
| 5   | コンビニ         | 実売上         | 未発送         | 処理中         |
### 2.3.2. 注文状況と決済状況の関係

| No. | 注文状況   | 決済状況                                   | 備考                 |
| --- | ---------- | ------------------------------------------ | -------------------- |
| 1   | 発送前     | 仮売上もしくは振込待ち                     |                      |
| 2   | 発送処理中 | 仮売上もしくは実売上                       | 代引きの場合は仮売上 |
| 3   | 保留中     | 仮売上もしくは振込待ち                     |                      |
| 4   | 発送完了   | 実売上                                     |                      |
| 5   | 返品       | 返金                                       |                      |
| 6   | キャンセル | 返品、キャンセル、振込待ちもしくは代引拒否 | 仮売上、実売上を除く |

## 2.4. お知らせ公開状況

- topics.statusの値によって変動

### 2.4.1. DB項目

#### 2.4.1.1. お知らせ公開状況 (topics.status)

| NO  | 論理名   | 物理名 | 値  |
| --- | -------- | ------ | --- |
| 1   | 配信終了 | closed | 0   |
| 2   | 配信中   | open   | 1   |

### 2.4.2. 表示項目

| No. | 名称     | アイコンの色 | 対応DB項目                  | 備考 |
| --- | -------- | ------------ | --------------------------- | ---- |
| 1   | 配信終了 | グレー色     | topics.status = 0(配信終了) |      |
| 2   | 配信中   | 緑色         | topics.status = 1(配信中)   |      |

## 2.5. 入荷リクエスト状況

- restock_requests.statusの値によって変動

### 2.5.1. DB項目

#### 2.5.1.1. 入荷リクエスト状況 (restock_requests.status)

| NO  | 論理名       | 物理名     | 値  |
| --- | ------------ | ---------- | --- |
| 1   | リクエスト中 | in_request | 1   |
| 2   | 下書き       | draft      | 2   |
| 3   | 配信済み     | sent       | 3   |

### 2.5.2. 表示項目

| No. | 名称         | アイコンの色 | 対応DB項目                                | 備考 |
| --- | ------------ | ------------ | ----------------------------------------- | ---- |
| 1   | リクエスト中 | 黄色         | restock_requests.status = 1(リクエスト中) |      |
| 2   | 下書き       | オレンジ色   | restock_requests.status = 2(下書き)       |      |
| 3   | 配信済み     | 緑色         | restock_requests.status = 3(配信済み)     |      |

## 2.6. 定期購入状況

- subscriptions.statusの値によって変動

### 2.6.1. DB項目

#### 2.6.1.1. 定期購入状況 (subscriptions.status)

| NO  | 論理名       | 物理名       | 値  |
| --- | ------------ | ------------ | --- |
| 1   | 有効         | active       | 1   |
| 2   | 洗替NG       | reversal_ng  | 2   |
| 3   | 継続課金NG   | recurring_ng | 3   |
| 4   | 初月スキップ | first_month  | 4   |

### 2.6.2. 表示項目

| No. | 名称         | アイコンの色 | 対応DB項目                             | 備考 |
| --- | ------------ | ------------ | -------------------------------------- | ---- |
| 1   | 有効         | ー           | subscriptions.status = 1(有効)         |      |
| 2   | 洗替NG       | ー           | subscriptions.status = 2(洗替NG)       |      |
| 3   | 継続課金NG   | ー           | subscriptions.status = 3(継続課金NG)   |      |
| 4   | 初月スキップ | ー           | subscriptions.status = 4(初月スキップ) |      |

## 2.7. 定期購入プロセス状況

- subscriptions.processing_statusの値によって変動

### 2.7.1. DB項目

#### 2.7.1.1. 定期購入プロセス状況 (subscriptions.processing_status)

| NO  | 論理名     | 物理名           | 値  |
| --- | ---------- | ---------------- | --- |
| 1   | 処理中     | processing       | 1   |
| 2   | 次回準備中 | prepare_for_next | 2   |
| 3   | 一時停止   | pending          | 3   |
| 4   | 解約       | finished         | 4   |

### 2.7.2. 表示項目

| No. | 名称       | アイコンの色 | 対応DB項目                                      | 備考 |
| --- | ---------- | ------------ | ----------------------------------------------- | ---- |
| 1   | 処理中     | 緑色         | subscriptions.processing_status = 1(処理中)     |      |
| 2   | 次回準備中 | オレンジ色   | subscriptions.processing_status = 2(次回準備中) |      |
| 3   | 一時停止   | 赤色         | subscriptions.processing_status = 3(一時停止)   |      |
| 4   | 解約       | グレー色     | subscriptions.processing_status = 4(解約)       |      |

## 2.8. メール配信状況

- email_jobs.statusの値によって変動

### 2.8.1. DB項目

#### 2.8.1.1. メール配信状況 (email_jobs.status)

| NO  | 論理名   | 物理名    | 値  |
| --- | -------- | --------- | --- |
| 1   | 下書き   | draft     | 0   |
| 2   | 配信済み | delivered | 1   |

### 2.8.2. 表示項目

| No. | 名称     | アイコンの色 | 対応DB項目                      | 備考 |
| --- | -------- | ------------ | ------------------------------- | ---- |
| 1   | 下書き   | 黄色         | email_jobs.status = 0(下書き)   |      |
| 2   | 配信済み | 緑色         | email_jobs.status = 1(配信済み) |      |

## 2.9. 商品ステータス

- products.statusの値によって変動
- 将来的にはこのステータスは廃止を検討(product_detailsの方で管理予定)

### 2.9.1. DB項目

#### 2.9.1.1. 商品ステータス (products.status)

| NO  | 論理名 | 物理名    | 値  |
| --- | ------ | --------- | --- |
| 1   | 下書き | draft     | 1   |
| 2   | 公開中 | published | 2   |
| 3   | 非公開 | closed    | 3   |

### 2.9.2. 表示項目

| No. | 名称   | アイコンの色 | 対応DB項目                  | 備考 |
| --- | ------ | ------------ | --------------------------- | ---- |
| 1   | 下書き | 黄色         | products.status = 1(下書き) |      |
| 2   | 公開中 | オレンジ色   | products.status = 2(公開中) |      |
| 3   | 非公開 | 緑色         | products.status = 3(非公開) |      |

## 2.10. 商品詳細ステータス

- product_details.statusの値によって変動
- 今後商品についての公開/非公開はこちらのステータスで管理するよう移行予定

### 2.10.1. DB項目

#### 2.10.1.1. 商品ステータス (product_details.status)

| NO  | 論理名 | 物理名    | 値  |
| --- | ------ | --------- | --- |
| 1   | 下書き | draft     | 1   |
| 2   | 公開中 | published | 2   |
| 3   | 非公開 | closed    | 3   |

### 2.10.2. 表示項目

| No. | 名称   | アイコンの色 | 対応DB項目                         | 備考 |
| --- | ------ | ------------ | ---------------------------------- | ---- |
| 1   | 下書き | 黄色         | product_details.status = 1(下書き) |      |
| 2   | 公開中 | オレンジ色   | product_details.status = 2(公開中) |      |
| 3   | 非公開 | 緑色         | product_details.status = 3(非公開) |      |